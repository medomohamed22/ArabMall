<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Donate Way - Donate with Pi Network</title>
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<style>
  /* ===== ÿπÿßŸÖ ===== */
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; min-height:100vh; transition: background 0.5s, color 0.5s; }
  body.light { background: linear-gradient(135deg,#f5f0ff 0%,#e6d9ff 100%); color:#4a148c; }
  body.dark { background: #1a1a2e; color:#d1c4e9; }
  .container { max-width:1100px; margin:30px auto; padding:20px; }

  /* ===== ÿ±ÿ£ÿ≥ ÿßŸÑÿµŸÅÿ≠ÿ© ===== */
  .header { text-align:center; margin-bottom:30px; position:relative; }
  .logo { font-size:90px; margin-bottom:10px; color:#7e57c2; animation: float 3s ease-in-out infinite; }
  @keyframes float {0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}
  h1 { font-size:38px; margin:10px 0; }
  p.intro { font-size:19px; opacity:0.9; max-width:800px; margin:0 auto 20px; }
  #user { font-size:22px; font-weight:bold; margin:15px 0; }

  /* ===== ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä ===== */
  #theme-toggle { position:absolute; top:10px; right:10px; padding:10px 20px; border-radius:50px; cursor:pointer; border:none; background:#7e57c2; color:white; font-size:16px; }
  #theme-toggle:hover { background:#6a1b9a; }

  /* ===== ÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑÿ™ÿ®ÿ±ÿπ ===== */
  .campaigns { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:20px; }
  .campaign-card { background:#fff; border-radius:20px; padding:25px; text-align:center; box-shadow:0 8px 20px rgba(126,87,194,0.15); transition:0.4s; border:1px solid rgba(126,87,194,0.1); }
  .campaign-card:hover { transform:translateY(-10px); box-shadow:0 15px 35px rgba(126,87,194,0.25); }
  .icon { font-size:50px; margin-bottom:15px; color:#9c27b0; }
  .campaign-title { font-size:24px; margin-bottom:10px; font-weight:600; }
  .campaign-desc { font-size:15px; margin-bottom:15px; line-height:1.6; }

  .donate-options { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin:10px 0; }
  .amount-btn { padding:8px 15px; border-radius:50px; border:2px solid #b39ddb; background:#ede7f6; cursor:pointer; font-weight:500; transition:0.3s; }
  .amount-btn:hover { background:#b39ddb;color:white; transform:scale(1.1);}
  .amount-btn.selected { background:#7e57c2;color:white;border-color:#7e57c2; }

  .custom-amount { display:flex; justify-content:center; gap:10px; align-items:center; flex-wrap:wrap; margin:10px 0; }
  .custom-input { padding:10px 15px; border-radius:50px; border:2px solid #b39ddb; width:130px; text-align:center; }
  .custom-btn { padding:8px 15px; border-radius:50px; border:none; background:#7e57c2; color:white; cursor:pointer; }

  button.donate { background:linear-gradient(135deg,#9c27b0,#7e57c2); color:white; padding:12px 25px; border:none; border-radius:50px; cursor:pointer; font-weight:bold; margin-top:10px; width:100%; transition:0.4s; }
  button.donate:hover { transform:translateY(-3px); box-shadow:0 10px 25px rgba(126,87,194,0.3); }

  .note { text-align:center; font-size:14px; margin:30px auto; max-width:90%; background:rgba(255,255,255,0.7); padding:15px; border-radius:15px; backdrop-filter:blur(10px); border:1px solid rgba(126,87,194,0.2);}
  footer { text-align:center; margin-top:50px; font-size:13px; opacity:0.8; }

  /* ===== ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ™ÿ®ÿ±ÿπ ===== */
  .dashboard { background:rgba(255,255,255,0.9); padding:15px; border-radius:15px; margin-bottom:20px; }
  .dashboard h2 { margin:10px 0; font-size:20px; }
  .dashboard table { width:100%; border-collapse:collapse; margin-top:10px; }
  .dashboard th, .dashboard td { border:1px solid #ccc; padding:8px; text-align:center; font-size:14px; }
  .badge { padding:4px 10px; border-radius:12px; color:white; font-weight:bold; font-size:12px; }

  .badge.bronze{background:#cd7f32;}
  .badge.silver{background:#c0c0c0;}
  .badge.gold{background:#ffd700;}
  .badge.platinum{background:#e5e4e2; color:#000;}

  /* ===== ÿπÿØÿßÿØ ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ===== */
  .progress-container { background:#eee; border-radius:10px; overflow:hidden; height:12px; margin:8px 0; }
  .progress-bar { height:100%; background:#7e57c2; width:0%; transition:width 0.5s; }

  @media(max-width:768px){.logo{font-size:70px;} h1{font-size:32px;} p.intro{font-size:16px;} .campaign-title{font-size:22px;} .campaign-desc{font-size:14px;} .custom-input{width:100px;}}
</style>
</head>
<body class="light">
<div class="container">

  <!-- ÿ±ÿ£ÿ≥ ÿßŸÑÿµŸÅÿ≠ÿ© -->
  <div class="header">
    <button id="theme-toggle">Toggle Dark Mode</button>
    <div class="logo">œÄ</div>
    <h1>Donate Way</h1>
    <p class="intro">Donate with Pi Network to support charitable and humanitarian campaigns</p>
    <div id="user">Authenticating...</div>
  </div>

  <!-- ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ™ÿ®ÿ±ÿπ -->
  <div class="dashboard">
    <h2>Your Donations <span id="donor-badge"></span></h2>
    <table id="donation-table">
      <tr><th>Campaign</th><th>Amount (Pi)</th><th>Date & Time</th></tr>
    </table>
  </div>

  <!-- ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ -->
  <div id="campaigns" class="campaigns"></div>

  <div class="note">You can choose a fixed amount or enter a custom amount.</div>
  <footer>Donate Way ¬© 2025 - Powered by Pi Network</footer>
</div>

<script>
  Pi.init({ version:"2.0" });

  let currentUser = null;
  let donations = [];
  let selectedAmounts = {};

  const campaignsData = [
    { id:"camp1", title:"Food Aid for Needy Families", desc:"Provide meals for families in need", icon:"üç≤", goal:500 },
    { id:"camp2", title:"Education for Children", desc:"Support education in remote areas", icon:"üìö", goal:800 },
    { id:"camp3", title:"Medical Treatment", desc:"Help cover medical expenses for patients", icon:"üè•", goal:600 },
    { id:"camp4", title:"Clean Water Projects", desc:"Dig wells and provide clean water", icon:"üíß", goal:400 }
  ];

  // ÿ™ŸàŸÑŸäÿØ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ≠ŸÖŸÑÿßÿ™
  function renderCampaigns(){
    const container = document.getElementById('campaigns');
    container.innerHTML='';
    campaignsData.forEach(camp=>{
      selectedAmounts[camp.id]=10;
      const card=document.createElement('div');
      card.className='campaign-card';
      card.innerHTML=`
        <div class="icon">${camp.icon}</div>
        <h2 class="campaign-title">${camp.title}</h2>
        <p class="campaign-desc">${camp.desc}</p>
        <div class="progress-container"><div class="progress-bar" id="progress-${camp.id}"></div></div>
        <div class="donate-options">
          <button class="amount-btn selected" onclick="selectAmount('${camp.id}',5)">5 Pi</button>
          <button class="amount-btn" onclick="selectAmount('${camp.id}',10)">10 Pi</button>
          <button class="amount-btn" onclick="selectAmount('${camp.id}',50)">50 Pi</button>
          <button class="amount-btn" onclick="selectAmount('${camp.id}',100)">100 Pi</button>
        </div>
        <div class="custom-amount">
          <input type="number" min="0.001" step="0.001" id="custom-${camp.id}" class="custom-input" placeholder="Custom amount">
          <button class="custom-btn" onclick="useCustomAmount('${camp.id}')">Apply</button>
        </div>
        <button class="donate" onclick="donate('${camp.id}')">Donate Now</button>
      `;
      container.appendChild(card);
      updateProgress(camp.id);
    });
  }

  function updateProgress(campId){
    const camp = campaignsData.find(c=>c.id===campId);
    const total = donations.filter(d=>d.campaign===camp.title).reduce((a,b)=>a+b.amount,0);
    const percent=Math.min((total/camp.goal)*100,100);
    document.getElementById(`progress-${campId}`).style.width=percent+'%';
  }

  function selectAmount(campId,amount){
    selectedAmounts[campId]=amount;
    document.querySelectorAll(`#campaigns .amount-btn`).forEach(btn=>btn.classList.remove('selected'));
    event.target.classList.add('selected');
    const input=document.getElementById(`custom-${campId}`);
    if(input) input.value='';
  }

  function useCustomAmount(campId){
    const val=parseFloat(document.getElementById(`custom-${campId}`).value);
    if(isNaN(val)||val<=0){ alert("Enter valid amount >0"); return;}
    selectedAmounts[campId]=val;
    document.querySelectorAll(`#campaigns .amount-btn`).forEach(btn=>btn.classList.remove('selected'));
  }

  // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ™ÿ®ÿ±ÿπ
  async function donate(campId){
    const amount=selectedAmounts[campId];
    const camp = campaignsData.find(c=>c.id===campId);
    const paymentData={amount:amount, memo:`Donation of ${amount} Pi to ${camp.title}`, metadata:{campaign:camp.title}};
    const callbacks={
      onReadyForServerApproval: paymentId=>console.log("Approval:",paymentId),
      onReadyForServerCompletion:(paymentId,txid)=>{
        alert(`Success! TXID: ${txid}`);
        donations.push({campaign:camp.title,amount:amount,date:new Date()});
        renderDashboard();
        updateProgress(campId);
      },
      onCancel:()=>alert("Payment cancelled"),
      onError:err=>alert("Error:"+err.message)
    };
    Pi.createPayment(paymentData,callbacks);
  }

  function renderDashboard(){
    const table=document.getElementById('donation-table');
    table.innerHTML=`<tr><th>Campaign</th><th>Amount (Pi)</th><th>Date & Time</th></tr>`;
    donations.forEach(d=>{
      const row=document.createElement('tr');
      row.innerHTML=`<td>${d.campaign}</td><td>${d.amount}</td><td>${d.date.toLocaleString()}</td>`;
      table.appendChild(row);
    });
    updateBadge();
  }

  function updateBadge(){
    const total=donations.reduce((a,b)=>a+b.amount,0);
    const badge=document.getElementById('donor-badge');
    if(total<50){ badge.innerHTML='<span class="badge bronze">Bronze</span>'; }
    else if(total<150){ badge.innerHTML='<span class="badge silver">Silver</span>'; }
    else if(total<300){ badge.innerHTML='<span class="badge gold">Gold</span>'; }
    else{ badge.innerHTML='<span class="badge platinum">Platinum</span>'; }
  }

  // ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä/ÿßŸÑŸÜŸáÿßÿ±Ÿä
  document.getElementById('theme-toggle').onclick=function(){
    document.body.classList.toggle('dark');
    document.body.classList.toggle('light');
  }

  // ÿßŸÑÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
  async function authenticate(){
    try{
      const scopes=['username','payments'];
      const auth=await Pi.authenticate(scopes);
      currentUser=auth.user.username;
      document.getElementById('user').innerText=`Welcome, ${currentUser} üëã`;
    }catch(err){
      console.error(err);
      document.getElementById('user').innerText="Authentication failed, use Pi Browser";
    }
  }

  window.onload=function(){
    renderCampaigns();
    renderDashboard();
    authenticate();
  }
</script>
</body>
</html>
